{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _Object$getPrototypeOf from 'babel-runtime/core-js/object/get-prototype-of';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getScrollParent, getCurrentDistance, throttle } from '../utils/utils';\nimport gif from '../assets/loading.gif';\n\nvar LoadMore = function (_React$Component) {\n  _inherits(LoadMore, _React$Component);\n\n  function LoadMore() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, LoadMore);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = LoadMore.__proto__ || _Object$getPrototypeOf(LoadMore)).call.apply(_ref, [this].concat(args))), _this), _this.checkIsInstantiation = function (target) {\n      if (!React.isValidElement(target)) {\n        return target;\n      }\n\n      return function () {\n        return target;\n      };\n    }, _this.scrollHandlerOriginal = function () {\n      var _this$props = _this.props,\n          onLoadMore = _this$props.onLoadMore,\n          distance = _this$props.distance,\n          loading = _this$props.loading;\n      var currentDistance = getCurrentDistance(_this.scrollParent);\n\n      if (!loading && currentDistance <= distance) {\n        if (onLoadMore && typeof onLoadMore === 'function') {\n          onLoadMore();\n        }\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(LoadMore, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.scrollParent = getScrollParent(this.el);\n      this.scrollHandler = throttle(this.scrollHandlerOriginal, 100);\n      this.scrollParent.addEventListener('scroll', this.scrollHandler);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.completed) {\n        this.scrollParent.removeEventListener('scroll', this.scrollHandler);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.scrollParent.removeEventListener('scroll', this.scrollHandler);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          loading = _props.loading,\n          completed = _props.completed,\n          indicator = _props.indicator,\n          style = _props.style;\n      var loadingStyle = {\n        textAlign: 'center',\n        paddingTop: 20,\n        paddingBottom: 20,\n        fontSize: 28,\n        color: '#999'\n      };\n      var gifStyle = {\n        width: 36,\n        height: 36,\n        display: 'block',\n        margin: '0 auto'\n      };\n      var _ref2 = [this.checkIsInstantiation(indicator.loading), this.checkIsInstantiation(indicator.completed)],\n          Loading = _ref2[0],\n          Completed = _ref2[1];\n      return React.createElement(React.Fragment, null, React.Children.only(this.props.children), React.createElement('div', {\n        style: _extends({}, loadingStyle, style),\n        ref: function ref(el) {\n          _this2.el = el;\n        }\n      }, loading && (indicator.loading ? React.createElement(Loading, null) : React.createElement('img', {\n        style: gifStyle,\n        src: gif,\n        alt: 'loading'\n      })), !loading && completed && (indicator.completed ? React.createElement(Completed, null) : React.createElement('span', null, \"\\u6CA1\\u6709\\u4E86\\uFF0C\\u5230\\u5E95\\u4E86\\uFF01\"))));\n    }\n  }]);\n\n  return LoadMore;\n}(React.Component);\n\nLoadMore.propTypes = {\n  distance: PropTypes.number,\n  onLoadMore: PropTypes.func.isRequired,\n  loading: PropTypes.bool,\n  completed: PropTypes.bool,\n  indicator: PropTypes.object\n};\nLoadMore.defaultProps = {\n  distance: 100,\n  loading: false,\n  completed: false,\n  indicator: {\n    loading: null,\n    completed: null\n  }\n};\nexport { LoadMore as default };","map":{"version":3,"sources":["/var/local/startup.me/client/node_modules/react-loadmore-component/lib/components/LoadMore.js"],"names":["_extends","_Object$getPrototypeOf","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","PropTypes","getScrollParent","getCurrentDistance","throttle","gif","LoadMore","_React$Component","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","call","apply","concat","checkIsInstantiation","target","isValidElement","scrollHandlerOriginal","_this$props","props","onLoadMore","distance","loading","currentDistance","scrollParent","key","value","componentDidMount","el","scrollHandler","addEventListener","componentWillReceiveProps","nextProps","completed","removeEventListener","componentWillUnmount","render","_this2","_props","indicator","style","loadingStyle","textAlign","paddingTop","paddingBottom","fontSize","color","gifStyle","width","height","display","margin","_ref2","Loading","Completed","createElement","Fragment","Children","only","children","ref","src","alt","Component","propTypes","number","func","isRequired","bool","object","defaultProps","default"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _Object$getPrototypeOf from 'babel-runtime/core-js/object/get-prototype-of';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getScrollParent, getCurrentDistance, throttle } from '../utils/utils';\nimport gif from '../assets/loading.gif';\n\nvar LoadMore = function (_React$Component) {\n  _inherits(LoadMore, _React$Component);\n\n  function LoadMore() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, LoadMore);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = LoadMore.__proto__ || _Object$getPrototypeOf(LoadMore)).call.apply(_ref, [this].concat(args))), _this), _this.checkIsInstantiation = function (target) {\n      if (!React.isValidElement(target)) {\n        return target;\n      }\n      return function () {\n        return target;\n      };\n    }, _this.scrollHandlerOriginal = function () {\n      var _this$props = _this.props,\n          onLoadMore = _this$props.onLoadMore,\n          distance = _this$props.distance,\n          loading = _this$props.loading;\n\n      var currentDistance = getCurrentDistance(_this.scrollParent);\n      if (!loading && currentDistance <= distance) {\n        if (onLoadMore && typeof onLoadMore === 'function') {\n          onLoadMore();\n        }\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(LoadMore, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.scrollParent = getScrollParent(this.el);\n      this.scrollHandler = throttle(this.scrollHandlerOriginal, 100);\n      this.scrollParent.addEventListener('scroll', this.scrollHandler);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.completed) {\n        this.scrollParent.removeEventListener('scroll', this.scrollHandler);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.scrollParent.removeEventListener('scroll', this.scrollHandler);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          loading = _props.loading,\n          completed = _props.completed,\n          indicator = _props.indicator,\n          style = _props.style;\n\n      var loadingStyle = {\n        textAlign: 'center',\n        paddingTop: 20,\n        paddingBottom: 20,\n        fontSize: 28,\n        color: '#999'\n      };\n      var gifStyle = {\n        width: 36,\n        height: 36,\n        display: 'block',\n        margin: '0 auto'\n      };\n      var _ref2 = [this.checkIsInstantiation(indicator.loading), this.checkIsInstantiation(indicator.completed)],\n          Loading = _ref2[0],\n          Completed = _ref2[1];\n\n      return React.createElement(\n        React.Fragment,\n        null,\n        React.Children.only(this.props.children),\n        React.createElement(\n          'div',\n          { style: _extends({}, loadingStyle, style), ref: function ref(el) {\n              _this2.el = el;\n            } },\n          loading && (indicator.loading ? React.createElement(Loading, null) : React.createElement('img', { style: gifStyle, src: gif, alt: 'loading' })),\n          !loading && completed && (indicator.completed ? React.createElement(Completed, null) : React.createElement(\n            'span',\n            null,\n            '\\u6CA1\\u6709\\u4E86\\uFF0C\\u5230\\u5E95\\u4E86\\uFF01'\n          ))\n        )\n      );\n    }\n  }]);\n\n  return LoadMore;\n}(React.Component);\n\nLoadMore.propTypes = {\n  distance: PropTypes.number,\n  onLoadMore: PropTypes.func.isRequired,\n  loading: PropTypes.bool,\n  completed: PropTypes.bool,\n  indicator: PropTypes.object\n};\nLoadMore.defaultProps = {\n  distance: 100,\n  loading: false,\n  completed: false,\n  indicator: {\n    loading: null,\n    completed: null\n  }\n};\nexport { LoadMore as default };"]},"metadata":{},"sourceType":"module"}